#!/usr/bin/env python3

# Read badly formatted PDB file (i.e. generated by Gromacs' genbox tool) and
# write to CIF file. Use this if openbabel doesn't do the job properly. It may
# complain that columns 77-78 are empty and reads the atom symbols wrong.
# pwtools.parse.PDBFile is more forgiving.

import sys
from pwtools import io

def help(prog):
    print("""
usage
-----
{} input.pdb [output.cif]
""".format(prog))

if __name__ == '__main__':
    argv = sys.argv
    prog = argv[0]
    if (len(argv) not in [2,3]) or (argv[1] in ['-h', '--help']):
        help(prog)
        sys.exit()
    infile = argv[1]
    if len(argv) == 3:
        outfile = argv[2]
    else:
        outfile = infile + '.cif'

    io.write_cif(outfile, io.read_pdb(infile))
